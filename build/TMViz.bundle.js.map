{"version":3,"sources":["webpack://[name]/./src/state-diagram/StateViz.css","webpack://[name]/./src/tape/tape.css","webpack://[name]/./src/TMViz.js","webpack://[name]/./src/TuringMachine.js","webpack://[name]/./src/state-diagram/StateGraph.js","webpack://[name]/./src/state-diagram/StateViz.js","webpack://[name]/./src/tape/Tape.js","webpack://[name]/./src/tape/TapeViz.js","webpack://[name]/./src/util.js","webpack://[name]/./src/watch.js","webpack://[name]/external \"_\"","webpack://[name]/external \"d3\"","webpack://[name]/external \"lodash\"","webpack://[name]/webpack/bootstrap","webpack://[name]/webpack/runtime/define property getters","webpack://[name]/webpack/runtime/hasOwnProperty shorthand","webpack://[name]/webpack/runtime/make namespace object","webpack://[name]/webpack/runtime/publicPath","webpack://[name]/webpack/startup"],"names":["TuringMachine","TapeViz","StateGraph","StateViz","watchInit","d3","pulseEdge","edge","select","domNode","classed","transition","style","duration","each","this","addTape","div","spec","append","attr","blank","input","String","split","TMViz","posTable","graph","table","stateviz","getVertexMap","getEdges","undefined","positionTable","edgeAnimation","stepInterval","self","machine","animationCallback","state","symbol","tuple","getInstructionAndEdge","isRunning","step","instruction","animatedTransition","startState","prop","oldstate","newstate","getVertex","isHalted","Object","defineProperty","configurable","get","set","value","__parentDiv","__spec","prototype","reset","tape","remove","module","exports","toString","instruct","nextInstruction","write","direction","MoveHead","right","headRight","left","headLeft","none","headNone","TypeError","move","defineProperties","read","enumerable","freeze","_","normalize","defaults","visibleSpace","c","derived","mapValues","transitions","label","allEdges","forEach","vertex","stateTransitions","cache","symbolKey","symbols","reduce","acc","x","length","push","target","tap","source","labels","bind","edgeTo","action","rightSide","map","join","labelFor","edges","deriveGraph","__graph","__edges","Error","isBrowserIEorEdge","assign","addV","array1","array2","i","subtractV","normV","array","Math","sqrt","y","normSqV","vectorFromLengthAngle","angle","cos","sin","EdgeCounter","e","key","index","numEdgesFromTo","src","EdgeShape","loop","arc","straight","identity","noop","limitRange","min","max","shapeForEdge","appendSVGTo","hwRatio","width","height","position","top","container","nodes","linkArray","w","h","nodeRadius","colors","scale","category10","svg","nodeArray","Array","values","__stateMap","force","layout","links","size","linkDistance","charge","theta","gravity","start","drag","on","d","fixed","edgeCounter","edgegroups","selectAll","data","enter","labelAbove","labelBelow","edgeD","edgeIndex","group","edgepath","text","shape","getPath","loopEndOffset","loopArc","PI","p1","p2","offset","radius","atan2","sep","n","scalar","multiplyV","edgePathFor","refreshLabels","svgrect","getBBox","isFlipped","shouldFlip","edgepaths","nodeSelection","nodecircles","resume","call","nodelabels","lastIndexOf","svgCSS","styleSheet","cssText","textContent","cx","cy","every","stop","getPositionTable","pick","stateMap","node","setPositionTable","Tape","writable","before","after","slice","reverse","last","pop","isEmpty","readOffset","readRange","end","range","initTapeCells","selection","datum","cellWidth","cellHeight","positionCells","repositionWrapper","wrapper","lookaround","moveHead","exit","wOffset","cOffset","create","constructor","childNodes","insert","Boolean","document","documentMode","window","StyleMedia","thisArg","handler","desc","getOwnPropertyDescriptor","accessors","newval","val","watch","lodash","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","o","obj","hasOwnProperty","r","Symbol","toStringTag","p","__webpack_exports__"],"mappings":"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","file":"TMViz.bundle.js","sourcesContent":["export default __webpack_public_path__ + \"state-diagram/StateViz.css\";","export default __webpack_public_path__ + \"tape/tape.css\";","'use strict';\n/**\n * Turing machine visualization component.\n *\n * • Adds running and reset on top of the base Turing machine.\n * • Displays an animated state diagram and tape diagram.\n * Does not include UI elements for controlling the machine.\n *\n * @module\n */\n\nvar TuringMachine = require('./TuringMachine').TuringMachine,\n    TapeViz = require('./tape/TapeViz'),\n    StateGraph = require('./state-diagram/StateGraph'),\n    StateViz = require('./state-diagram/StateViz'),\n    watchInit = require('./watch').watchInit,\n    d3 = require('d3');\n\n/**\n * Create an animated transition function.\n * @param  {StateGraph} graph\n * @param  {LayoutEdge -> any} animationCallback\n * @return {(string, string) -> Instruction} Created transition function.\n */\nfunction animatedTransition(graph, animationCallback) {\n  return function (state, symbol) {\n    var tuple = graph.getInstructionAndEdge(state, symbol);\n    if (tuple == null) { return null; }\n\n    animationCallback(tuple.edge);\n    return tuple.instruction;\n  };\n}\n\n/**\n * Default edge animation callback.\n * @param  {{domNode: Node}} edge\n * @return {D3Transition} The animation. Use this for transition chaining.\n */\nfunction pulseEdge(edge) {\n  var edgepath = d3.select(edge.domNode);\n  return edgepath\n      .classed('active-edge', true)\n    .transition()\n      .style('stroke-width', '3px')\n    .transition()\n      .style('stroke-width', '1px')\n    .transition()\n      .duration(0)\n      .each('start', /* @this edge */ function () {\n        d3.select(this).classed('active-edge', false);\n      })\n      .style('stroke', null)\n      .style('stroke-width', null);\n}\n\nfunction addTape(div, spec) {\n  return new TapeViz(div.append('svg').attr('class', 'tm-tape'), 9,\n    spec.blank, spec.input ? String(spec.input).split('') : []);\n}\n\n/**\n * Construct a new state and tape visualization inside a &lt;div&gt;.\n * @constructor\n * @param {HTMLDivElement} div        div to take over and use.\n * @param                  spec       machine specification\n * @param {PositionTable} [posTable]  position table for the state nodes\n */\nfunction TMViz(div, spec, posTable) {\n  div = d3.select(div);\n  var graph = new StateGraph(spec.table);\n  this.stateviz = new StateViz(\n    div,\n    graph.getVertexMap(),\n    graph.getEdges()\n  );\n  if (posTable != undefined) { this.positionTable = posTable; }\n\n  this.edgeAnimation = pulseEdge;\n  this.stepInterval = 100;\n\n  var self = this;\n  // We hook into the animation callback to know when to start the next step (when running).\n  function animateAndContinue(edge) {\n    var transition = self.edgeAnimation(edge);\n    if (self.isRunning) {\n      transition.transition().duration(self.stepInterval).each('end', function () {\n        // stop if machine was paused during the animation\n        if (self.isRunning) { self.step(); }\n      });\n    }\n  }\n\n  this.machine = new TuringMachine(\n    animatedTransition(graph, animateAndContinue),\n    spec.startState,\n    addTape(div, spec)\n  );\n  // intercept and animate when the state is set\n  watchInit(this.machine, 'state', function (prop, oldstate, newstate) {\n    d3.select(graph.getVertex(oldstate).domNode).classed('current-state', false);\n    d3.select(graph.getVertex(newstate).domNode).classed('current-state', true);\n    return newstate;\n  });\n\n  // Sidenote: each \"Step\" click evaluates the transition function once.\n  // Therefore, detecting halting always requires its own step (for consistency).\n  this.isHalted = false;\n\n  var isRunning = false;\n  /**\n   * Set isRunning to true to run the machine, and false to stop it.\n   */\n  Object.defineProperty(this, 'isRunning', {\n    configurable: true,\n    get: function () { return isRunning; },\n    set: function (value) {\n      if (isRunning !== value) {\n        isRunning = value;\n        if (isRunning) { this.step(); }\n      }\n    }\n  });\n\n  this.__parentDiv = div;\n  this.__spec = spec;\n}\n\n/**\n * Step the machine immediately and interrupt any animations.\n */\nTMViz.prototype.step = function () {\n  if (!this.machine.step()) {\n    this.isRunning = false;\n    this.isHalted = true;\n  }\n};\n\n/**\n * Reset the Turing machine to its starting configuration.\n */\nTMViz.prototype.reset = function () {\n  this.isRunning = false;\n  this.isHalted = false;\n  this.machine.state = this.__spec.startState;\n  this.machine.tape.domNode.remove();\n  this.machine.tape = addTape(this.__parentDiv, this.__spec);\n};\n\nObject.defineProperty(TMViz.prototype, 'positionTable', {\n  get: function ()  { return this.stateviz.positionTable; },\n  set: function (posTable) { this.stateviz.positionTable = posTable; }\n});\n\nmodule.exports = TMViz;\n","'use strict';\n/**\n * Construct a Turing machine.\n * @param {(state, symbol) -> ?{state: state, symbol: symbol, move: direction}}\n *   transition\n *   A transition function that, given *only* the current state and symbol,\n *   returns an object with the following properties: symbol, move, and state.\n *   Returning null/undefined halts the machine (no transition defined).\n * @param {state} startState  The state to start in.\n * @param         tape        The tape to use.\n */\nfunction TuringMachine(transition, startState, tape) {\n  this.transition = transition;\n  this.state = startState;\n  this.tape = tape;\n}\n\nTuringMachine.prototype.toString = function () {\n  return String(this.state) + '\\n' + String(this.tape);\n};\n\n/**\n * Step to the next configuration according to the transition function.\n * @return {boolean} true if successful (the transition is defined),\n *   false otherwise (machine halted)\n */\nTuringMachine.prototype.step = function () {\n  var instruct = this.nextInstruction;\n  if (instruct == null) { return false; }\n\n  this.tape.write(instruct.symbol);\n  move(this.tape, instruct.move);\n  this.state = instruct.state;\n\n  return true;\n};\n\nObject.defineProperties(TuringMachine.prototype, {\n  nextInstruction: {\n    get: function () { return this.transition(this.state, this.tape.read()); },\n    enumerable: true\n  },\n  isHalted: {\n    get: function () { return this.nextInstruction == null; },\n    enumerable: true\n  }\n});\n\n// Allows for both notational conventions of moving the head or moving the tape\nfunction move(tape, direction) {\n  switch (direction) {\n    case MoveHead.right: tape.headRight(); break;\n    case MoveHead.left: tape.headLeft(); break;\n    case MoveHead.none: tape.headNone(); break;\n    default: throw new TypeError('not a valid tape movement: ' + String(direction));\n  }\n}\nvar MoveHead = Object.freeze({\n  left: { toString: function () { return 'L'; } },\n  right: { toString: function () { return 'R'; } },\n  none: { toString: function () { return 'N'; } }\n});\nvar MoveTape = Object.freeze({ left: MoveHead.right, right: MoveHead.left, none: MoveHead.none });\n\nexports.MoveHead = MoveHead;\nexports.MoveTape = MoveTape;\nexports.TuringMachine = TuringMachine;","'use strict';\n\nvar _ = require('lodash');\n\n\n/* Interface\n  type TransitionTable = {\n    [state: string]: ?{\n      [symbol: string]: Instruction\n    }\n  };\n  type Instruction = { state?: string, symbol?: string };\n\n  type DiagramGraph = {\n    [state: string]: {\n      label: string,\n      transitions: ?{\n        [symbol: string]: {\n          instruction: Instruction,\n          edge: LayoutEdge\n        }\n      }\n    }\n  };\n  type LayoutEdge = { source: Object, target: Object, labels: [string] }\n */\n\n/**\n * Use a transition table to derive the graph (vertices & edges) for a D3 diagram.\n * Edges with the same source and target are combined.\n * NB. In addition to single symbols, comma-separated symbols are supported.\n * e.g. symbol string '0,1,,,I' -> symbols [0,1,',','I'].\n */\n// TransitionTable -> DiagramGraph\nfunction deriveGraph(table) {\n  // We need two passes, since edges may point at vertices yet to be created.\n  // 1. Create all the vertices.\n  var graph = _.mapValues(table, function (transitions, state) {\n    return {\n      label: state,\n      transitions: transitions\n    };\n  });\n  // 2. Create the edges, which can now point at any vertex object.\n  var allEdges = [];\n  _.forEach(graph, function (vertex, state) {\n\n    vertex.transitions = vertex.transitions && (function () {\n      var stateTransitions = {};\n\n      // Combine edges with the same source and target\n      var cache = {};\n      function edgeTo(target, label) {\n        var edge = cache[target] ||\n          _.tap(cache[target] = {\n            source: vertex,\n            target: graph[target],\n            labels: []\n          }, allEdges.push.bind(allEdges));\n        edge.labels.push(label);\n        return edge;\n      }\n      // Create symbol -> instruction object map\n      _.forEach(vertex.transitions, function (instruct, symbolKey) {\n        // Handle comma-separated symbols.\n        // Recreate array by splitting on ','. Treat 2 consecutive ',' as , ','.\n        var symbols = symbolKey.split(',').reduce(function (acc, x) {\n          if (x === '' && acc[acc.length-1] === '') {\n            acc[acc.length-1] = ',';\n          } else {\n            acc.push(x);\n          }\n          return acc;\n        }, []);\n        var target = instruct.state != null ? instruct.state : state;\n        var edge = edgeTo(target, labelFor(symbols, instruct));\n\n        symbols.forEach(function (symbol) {\n          stateTransitions[symbol] = {\n            // Normalize for execution, but display the less-cluttered original.\n            instruction: normalize(state, symbol, instruct),\n            edge: edge\n          };\n        });\n      });\n\n      return stateTransitions;\n    }());\n\n  });\n\n  return {graph: graph, edges: allEdges};\n}\n\n// Normalize an instruction to include an explicit state and symbol.\n// e.g. {symbol: '1'} normalizes to {state: 'q0', symbol: '1'} when in state q0.\nfunction normalize(state, symbol, instruction) {\n  return _.defaults({}, instruction, {state: state, symbol: symbol});\n}\n\nfunction labelFor(symbols, action) {\n  var rightSide = ((action.symbol == null) ? '' : (visibleSpace(String(action.symbol)) + ','))\n    + String(action.move);\n  return symbols.map(visibleSpace).join(',') + '→' + rightSide;\n}\n\n// replace ' ' with '␣'.\nfunction visibleSpace(c) {\n  return (c === ' ') ? '␣' : c;\n}\n\n\n/**\n * Aids rendering and animating a transition table in D3.\n *\n * • Generates the vertices and edges (\"nodes\" and \"links\") for a D3 diagram.\n * • Provides mapping of each state to its vertex and each transition to its edge.\n * @param {TransitionTable} table\n */\nfunction StateGraph(table) {\n  var derived = deriveGraph(table);\n  Object.defineProperties(this, {\n    __graph: { value: derived.graph },\n    __edges: { value: derived.edges }\n  });\n}\n\n/**\n * D3 layout \"nodes\".\n */\n// StateGraph.prototype.getVertices = function () {\n//   return _.values(this.__graph);\n// };\n\n/**\n * Returns the mapping from states to vertices (D3 layout \"nodes\").\n * @return { {[state: string]: Object} }\n */\nStateGraph.prototype.getVertexMap = function () {\n  return this.__graph;\n};\n\n/**\n * D3 layout \"links\".\n */\nStateGraph.prototype.getEdges = function () {\n  return this.__edges;\n};\n\n/**\n * Look up a state's corresponding D3 \"node\".\n */\nStateGraph.prototype.getVertex = function (state) {\n  return this.__graph[state];\n};\n\nStateGraph.prototype.getInstructionAndEdge = function (state, symbol) {\n  var vertex = this.__graph[state];\n  if (vertex === undefined) {\n    throw new Error('not a valid state: ' + String(state));\n  }\n\n  return vertex.transitions && vertex.transitions[symbol];\n};\n\n\nmodule.exports = StateGraph;\n","'use strict';\n\nvar isBrowserIEorEdge = require('../util').isBrowserIEorEdge;\nvar d3 = require('d3');\nvar _ = require('lodash/fp');\nvar assign = require('lodash').assign; // need mutable assign()\n\n// *** Arrays as vectors ***\n\n// Add vectors.\n// Note: dimensions are not checked. Missing dimensions become NaN.\nfunction addV(array1, array2) {\n  return array1.map(function (x, i) { return x + array2[i]; });\n}\n\nfunction negateV(array) {\n  return array.map(function (x) { return -x; });\n}\n\nfunction subtractV(array1, array2) {\n  return addV(array1, negateV(array2));\n}\n\n// Scale the vector by a scalar.\nfunction multiplyV(array, scalar) {\n  return array.map(function (x) { return scalar*x; });\n}\n\n// Vector norm, squared\nfunction normSqV(array) {\n  function sq(x) { return x*x; }\n  function add(x, y) { return x + y; }\n  return array.map(sq).reduce(add, 0);\n}\n\n// Vector norm\nfunction normV(array) { return Math.sqrt(normSqV(array)); }\n\n// Return a copy of the vector rescaled as a unit vector (norm = 1).\nfunction unitV(array) {\n  var n = normV(array);\n  return array.map(function (x) { return x / n; });\n}\n\n// *** 2D Vectors ***\nfunction angleV(array) {\n  var x = array[0], y = array[1];\n  return Math.atan2(y, x);\n}\n\nfunction vectorFromLengthAngle(length, angle) {\n  return [Math.cos(angle) * length, Math.sin(angle) * length];\n}\n\n// *** Utilities ***\n\n// Count the directed edges that start at a given node and end at another.\n// Important: each node must have a unique .index property.\n// Example usage:\n// var counts = new EdgeCounter(edges);\n// var edgesFrom2To5 = counts.numEdgesFromTo(2,5);\n// var edgesFrom5to2 = counts.numEdgesFromTo(5,2);\nfunction EdgeCounter(edges) {\n  edges.forEach(function (e) {\n    var key = e.source.index +','+ e.target.index;\n    this[key] = (this[key] || 0) + 1;\n  }, this);\n}\n\nEdgeCounter.prototype.numEdgesFromTo = function (src, target) {\n  return this[String(src)+','+String(target)] || 0;\n};\n\nvar EdgeShape = Object.freeze({\n  loop: {},     // self-loop: a->a\n  arc: {},      // curved arc: a->b when b->a exists\n  straight: {}  // straight edge: a->b when b->a does not exist\n});\n\nEdgeCounter.prototype.shapeForEdge = function (e) {\n  if (e.target.index === e.source.index) {\n    return EdgeShape.loop;\n  } else if (this.numEdgesFromTo(e.target.index, e.source.index)) {\n    // has returning edge => arc\n    return EdgeShape.arc;\n  } else {\n    return EdgeShape.straight;\n  }\n};\n\n// create a function that will compute an edge's SVG 'd' attribute.\nfunction edgePathFor(nodeRadius, shape, d) {\n  // case: self-loop\n  var loopEndOffset, loopArc;\n  if (shape === EdgeShape.loop) {\n    // start at the top (90°), end slightly above the right (15°)\n    loopEndOffset = vectorFromLengthAngle(nodeRadius, -15 * Math.PI/180);\n    loopArc = ' a 19,27 45 1,1 ' + loopEndOffset[0] + ',' + (loopEndOffset[1]+nodeRadius);\n    return function () {\n      var x1 = d.source.x,\n          y1 = d.source.y;\n      return 'M ' + x1 + ',' + (y1-nodeRadius) + loopArc;\n    };\n  }\n  // case: between nodes\n  if (shape === EdgeShape.arc) {\n    // sub-case: arc\n    return function () {\n      // note: p1 & p2 have to be delayed, to access x/y at the time of the call\n      var p1 = [d.source.x, d.source.y];\n      var p2 = [d.target.x, d.target.y];\n      var offset = subtractV(p2, p1);\n      var radius = 6/5*normV(offset);\n      // Note: SVG's y-axis is flipped, so vector angles are negative\n      // relative to standard coordinates (as used in Math.atan2).\n      // Proof: angle(r <cos ϴ, -sin ϴ>) = angle(r <cos -ϴ, sin -ϴ>) = -ϴ.\n      var angle = angleV(offset);\n      var sep = -Math.PI/2/2; // 90° separation, half on each side\n      var source = addV(p1, vectorFromLengthAngle(nodeRadius, angle+sep));\n      var target = addV(p2, vectorFromLengthAngle(nodeRadius, angle+Math.PI-sep));\n      // IDEA: consider http://www.w3.org/TR/SVG/paths.html#PathDataCubicBezierCommands\n      return (p1[0] <= p2[0])\n        ? 'M '+source[0]+' '+source[1]+' A '+radius+' '+radius+' 0 0,1 '+target[0]+' '+target[1]\n        : 'M '+target[0]+' '+target[1]+' A '+radius+' '+radius+' 0 0,0 '+source[0]+' '+source[1];\n    };\n  } else if (shape === EdgeShape.straight) {\n    return function () {\n      // sub-case: straight line\n      var p1 = [d.source.x, d.source.y];\n      var p2 = [d.target.x, d.target.y];\n      var offset = subtractV(p2, p1);\n      // avoid spurious errors when bounding causes node centers to coincide\n      if (offset[0] === 0 && offset[1] === 0) { return null; }\n\n      var target = subtractV(p2, multiplyV(unitV(offset), nodeRadius));\n      return 'M '+p1[0]+' '+p1[1]+' L '+ target[0] +' '+ target[1];\n    };\n  }\n}\n\nfunction rectCenter(svgrect) {\n  return {x: svgrect.x + svgrect.width/2,\n          y: svgrect.y + svgrect.height/2};\n}\n\nfunction identity(x) { return x; }\nfunction noop() {}\n\nfunction limitRange(min, max, value) {\n  return Math.max(min, Math.min(value, max));\n}\n\n// IE padding hack so that SVG resizes properly.\n// This works across browsers but we only need it for IE.\nvar appendSVGTo = !isBrowserIEorEdge\n  ? function (div) { return div.append('svg'); }\n  : function (div, hwRatio) {\n    return div\n      .append('div')\n        .style({\n          width: '100%',\n          height: '0',\n          'padding-bottom': (100 * hwRatio) + '%',\n          position: 'relative'\n        })\n      .append('svg')\n        .style({\n          position: 'absolute',\n          top: '0',\n          left: '0'\n        });\n  };\n\n// *** D3 diagram ***\nrequire('./StateViz.css');\n\n// type LayoutNode = {label: string};\n// type StateMap = {[state: string]: LayoutNode};\n\n/**\n * Create a state diagram inside an SVG.\n * Each vertex/edge (node/link) object is also annotated with @.domNode@\n * corresponding to its SVG element.\n *\n * Note: currently, element IDs (e.g. for textPath) will collide if multiple\n * diagrams are on the same document (HTML page).\n * @param  {D3Selection}      container     Container to add the SVG to.\n * @param  {[LayoutNode] | StateMap} nodes  Parameter to D3's force.nodes.\n *   Important: passing a StateMap is recommended when using setPositionTable.\n *   Passing an array will key the state nodes by array index.\n * @param  {[LayoutEdge]}     linkArray     Parameter to D3's force.links.\n */\nfunction StateViz(container, nodes, linkArray) {\n  /* References:\n    [Sticky Force Layout](http://bl.ocks.org/mbostock/3750558) demonstrates\n    drag to position and double-click to release.\n\n    [Graph with labeled edges](http://bl.ocks.org/jhb/5955887) demonstrates\n    arrow edges with auto-rotated labels.\n  */\n\n  /* eslint-disable no-invalid-this */ // eslint is not familiar with D3\n  var w = 800;\n  var h = 500;\n  var linkDistance = 140;\n  var nodeRadius = 20;\n\n  var colors = d3.scale.category10();\n\n  var svg = appendSVGTo(container, h/w);\n  svg.attr({\n    'viewBox': [0, 0, w, h].join(' '),\n    'version': '1.1',\n    ':xmlns': 'http://www.w3.org/2000/svg',\n    ':xmlns:xlink': 'http://www.w3.org/1999/xlink'\n  });\n\n  // Force Layout\n\n  // drag event handlers\n  function dragstart(d) {\n    d.fixed = true;\n    svg.transition()\n      .style('box-shadow', 'inset 0 0 1px gold');\n  }\n  function dragend() {\n    svg.transition()\n      .style('box-shadow', null);\n  }\n  function releasenode(d) {\n    d.fixed = false;\n    force.resume();\n  }\n\n  // set up force layout\n  var nodeArray = nodes instanceof Array ? nodes : _.values(nodes);\n  this.__stateMap = nodes;\n\n  var force = d3.layout.force()\n      .nodes(nodeArray)\n      .links(linkArray)\n      .size([w,h])\n      .linkDistance([linkDistance])\n      .charge([-500])\n      .theta(0.1)\n      .gravity(0.05)\n      .start();\n\n  var drag = force.drag()\n      .on('dragstart', dragstart)\n      .on('dragend', dragend);\n\n  // Edges\n  var edgeCounter = new EdgeCounter(linkArray);\n\n  var edgeselection = svg.selectAll('.edgepath')\n    .data(linkArray)\n    .enter();\n\n  var edgegroups = edgeselection.append('g');\n\n  var labelAbove = function (d, i) { return String(-1.1*(i+1)) + 'em'; };\n  var labelBelow = function (d, i) { return String(0.6+ 1.1*(i+1)) + 'em'; };\n\n  edgegroups.each(function (edgeD, edgeIndex) {\n    var group = d3.select(this);\n    var edgepath = group\n      .append('path')\n        .attr({'class': 'edgepath',\n               'id': 'edgepath'+edgeIndex })\n        .each(function (d) { d.domNode = this; });\n\n    var labels = group.selectAll('.edgelabel')\n      .data(edgeD.labels).enter()\n      .append('text')\n        .attr('class', 'edgelabel');\n    labels.append('textPath')\n        .attr('xlink:href', function () { return '#edgepath'+edgeIndex; })\n        .attr('startOffset', '50%')\n        .text(identity);\n    /* To reduce JS computation, label positioning varies by edge shape:\n        * Straight edges can use a fixed 'dy' value.\n        * Loops cannot use 'dy' since it increases letter spacing\n          as labels get farther from the path. Instead, since a loop's shape\n          is fixed, it allows a fixed translate 'transform'.\n        * Arcs are bent and their shape is not fixed, so neither 'dy'\n          nor 'transform' can be constant.\n          Fortunately the curvature is slight enough that a fixed 'dy'\n          looks good enough without resorting to dynamic translations.\n    */\n    var shape = edgeCounter.shapeForEdge(edgeD);\n    edgeD.getPath = edgePathFor(nodeRadius, shape, edgeD);\n    switch (shape) {\n      case EdgeShape.straight:\n        labels.attr('dy', labelAbove);\n        edgeD.refreshLabels = function () {\n          // flip edge labels that are upside-down\n          labels.attr('transform', function () {\n            if (edgeD.target.x < edgeD.source.x) {\n              var c = rectCenter(this.getBBox());\n              return 'rotate(180 '+c.x+' '+c.y+')';\n            } else {\n              return null;\n            }\n          });\n        };\n        break;\n      case EdgeShape.arc:\n        var isFlipped;\n        edgeD.refreshLabels = function () {\n          var shouldFlip = edgeD.target.x < edgeD.source.x;\n          if (shouldFlip !== isFlipped) {\n            edgepath.classed('reversed-arc', shouldFlip);\n            labels.attr('dy', shouldFlip ? labelBelow : labelAbove);\n            isFlipped = shouldFlip;\n          }\n        };\n        break;\n      case EdgeShape.loop:\n        labels.attr('transform', function (d, i) {\n          return 'translate(' + String(8*(i+1)) + ' ' + String(-8*(i+1)) + ')';\n        });\n        edgeD.refreshLabels = noop;\n        break;\n    }\n  });\n  var edgepaths = edgegroups.selectAll('.edgepath');\n\n  // Nodes\n  // note: nodes are added after edges so as to paint over excess edge lines\n  var nodeSelection = svg.selectAll('.node')\n    .data(nodeArray)\n    .enter();\n\n  var nodecircles = nodeSelection\n    .append('circle')\n      .attr('class', 'node')\n      .attr('r', nodeRadius)\n      .style('fill', function (d,i) { return colors(i); })\n      .each(function (d) { d.domNode = this; })\n      .on('dblclick', releasenode)\n      .call(drag);\n\n  var nodelabels = nodeSelection\n   .append('text')\n     .attr('class', 'nodelabel')\n     .attr('dy', '0.25em') /* dy doesn't work in CSS */\n     .text(function (d) { return d.label; });\n\n  // Arrowheads\n  var svgdefs = svg.append('defs');\n  svgdefs.selectAll('marker')\n      .data(['arrowhead', 'active-arrowhead', 'reversed-arrowhead', 'reversed-active-arrowhead'])\n    .enter().append('marker')\n      .attr({'id': function (d) { return d; },\n             'viewBox':'0 -5 10 10',\n             'refX': function (d) {\n               return (d.lastIndexOf('reversed-', 0) === 0) ? 0 : 10;\n             },\n             'orient':'auto',\n             'markerWidth':10,\n             'markerHeight':10\n            })\n    .append('path')\n      .attr('d', 'M 0 -5 L 10 0 L 0 5 Z')\n      .attr('transform', function (d) {\n        return (d.lastIndexOf('reversed-', 0) === 0) ? 'rotate(180 5 0)' : null;\n      });\n\n  var svgCSS =\n    '.edgepath {' +\n    '  marker-end: url(#arrowhead);' +\n    '}' +\n    '.edgepath.active-edge {' +\n    '  marker-end: url(#active-arrowhead);' +\n    '}' +\n    '.edgepath.reversed-arc {' +\n    '  marker-start: url(#reversed-arrowhead);' +\n    '  marker-end: none;' +\n    '}' +\n    '.edgepath.active-edge.reversed-arc {' +\n    '  marker-start: url(#reversed-active-arrowhead);' +\n    '  marker-end: none;' +\n    '}';\n  svg.append('style').each(function () {\n    if (this.styleSheet) {\n      this.styleSheet.cssText = svgCSS;\n    } else {\n      this.textContent = svgCSS;\n    }\n  });\n\n  // Force Layout Update\n  force.on('tick', function () {\n    // Keep coordinates in bounds. http://bl.ocks.org/mbostock/1129492\n    // NB. Bounding can cause node centers to coincide, especially at corners.\n    nodecircles.attr({cx: function (d) { return d.x = limitRange(nodeRadius, w - nodeRadius, d.x); },\n                      cy: function (d) { return d.y = limitRange(nodeRadius, h - nodeRadius, d.y); }\n    });\n\n    nodelabels.attr('x', function (d) { return d.x; })\n              .attr('y', function (d) { return d.y; });\n\n    edgepaths.attr('d', function (d) { return d.getPath(); });\n\n    edgegroups.each(function (d) { d.refreshLabels(); });\n\n    // Conserve CPU when layout is fully fixed\n    if (nodeArray.every(function (d) { return d.fixed; })) {\n      force.stop();\n    }\n  });\n  this.force = force;\n  /* eslint-enable no-invalid-this */\n}\n\n// Positioning\n\n// {[key: State]: Node} -> PositionTable\nvar getPositionTable = _.mapValues(_.pick(['x', 'y', 'px', 'py', 'fixed']));\n\n// Tag nodes w/ positions. Mutates the node map.\n// PositionTable -> {[key: State]: Node} -> void\nfunction setPositionTable(posTable, stateMap) {\n  _.forEach(function (node, state) {\n    var position = posTable[state];\n    if (position !== undefined) {\n      assign(node, position);\n    }\n  }, stateMap);\n}\n\nObject.defineProperty(StateViz.prototype, 'positionTable', {\n  get: function () { return getPositionTable(this.__stateMap); },\n  set: function (posTable) {\n    setPositionTable(posTable, this.__stateMap);\n    // ensure that a cooled layout will update\n    this.force.resume();\n  }\n});\n\n\nmodule.exports = StateViz;\n","'use strict';\nvar _ = require('lodash/fp');\n\n// Bidirectional infinite tape\nfunction Tape(blank, input) {\n  Object.defineProperty(this, 'blank', {\n    value: blank,\n    writable: false,\n    enumerable: true\n  });\n  // zipper data structure\n  // INVARIANTS: tape.before can be empty, tape.after must be nonempty.\n  // before: cells before the head (in order; left to right).\n  // after:  cells after and including the head (in reverse; right to left).\n  this.tape = {\n    before: [],\n    after: (input == null || input.length == 0) ? [blank] : input.slice().reverse(),\n    toString: function () {\n      return this.before.join('') + '🔎' + this.after.slice().reverse().join('');\n    }\n  };\n}\n\n// Read the value at the tape head.\nTape.prototype.read = function () {\n  return _.last(this.tape.after);\n};\nTape.prototype.write = function (symbol) {\n  this.tape.after[this.tape.after.length - 1] = symbol;\n};\n\nTape.prototype.headRight = function () {\n  var before = this.tape.before,\n    after = this.tape.after;\n  before.push(after.pop());\n  if (_.isEmpty(after)) {\n    after.push(this.blank);\n  }\n};\nTape.prototype.headLeft = function () {\n  var before = this.tape.before,\n    after = this.tape.after;\n  if (_.isEmpty(before)) {\n    before.push(this.blank);\n  }\n  after.push(before.pop());\n};\nTape.prototype.headNone = function () {\n};\n\nTape.prototype.toString = function () {\n  return this.tape.toString();\n};\n\n// for tape visualization. not part of TM definition.\n// Read the value at an offset from the tape head.\n// 0 is the tape head. + is to the right, - to the left.\nTape.prototype.readOffset = function (i) {\n  var tape = this.tape;\n  if (i >= 0) {\n    // right side: offset [0..length-1] ↦ array index [length-1..0]\n    return (i <= tape.after.length - 1) ? tape.after[tape.after.length - 1 - i] : this.blank;\n  } else {\n    // left side: offset [-1..-length] ↦ array index [length-1..0]\n    return (i >= -tape.before.length) ? tape.before[tape.before.length + i] : this.blank;\n  }\n};\n\n// for tape visualization.\n// Read the values from an offset range (inclusive of start and end).\nTape.prototype.readRange = function (start, end) {\n  return _.range(start, end + 1).map(function (i) {\n    return this.readOffset(i);\n  }, this);\n};\n\nmodule.exports = Tape;","'use strict';\nvar Tape = require('./Tape.js'),\n    d3   = require('d3');\nrequire('./tape.css');\n\nvar cellWidth = 50;\nvar cellHeight = 50;\n\nfunction initTapeCells(selection) {\n  selection.attr('class', 'tape-cell');\n  selection.append('rect')\n      // the box outline is purely visual, so remove its data binding\n      .datum(null)\n      .attr({'width': cellWidth,\n             'height': cellHeight});\n  selection.append('text')\n      .text(function (d) { return d; })\n      .attr({'x': cellWidth/2, 'y': cellHeight/2 + 8});\n  return selection;\n}\n\nfunction positionCells(selection, offset) {\n  offset = (offset == null) ? 0 : offset;\n  selection.attr('transform', function (d, i) {\n    return 'translate(' + (-cellWidth+10 + cellWidth*(i+offset)) + ')';\n  });\n  return selection;\n}\n\nfunction repositionWrapper(wrapper) {\n  wrapper.attr('transform', 'translate(0 10)')\n    .transition()\n      .duration(0)\n    .select('.exiting')\n      .remove();\n}\n\n// Tape visualization centered around the tape head.\nfunction TapeViz(svg, lookaround, blank, input) {\n  Tape.call(this, blank, input);\n\n  Object.defineProperty(this, 'lookaround', {\n    value: lookaround,\n    writable: false,\n    enumerable: true\n  });\n  Object.defineProperty(this, 'domNode', {\n    value: svg,\n    writable: false,\n    enumerable: true\n  });\n\n  // width is before + head + after, trimming 2 off to show cut-off tape ends\n  var width  = cellWidth * (lookaround+1+lookaround-2) + 2*10;\n  var height = cellHeight + 2*10;\n  svg.attr({\n    'width': '95%',\n    'viewBox': [0, 0, width, height].join(' ')\n  });\n\n  this.wrapper = svg.append('g')\n      .attr('class', 'wrapper')\n      .call(repositionWrapper);\n\n  svg.append('rect')\n      .attr({'id': 'tape-head',\n             'width': (1+1/5) * cellWidth,\n             'height': (1+1/5) * cellHeight,\n             'x': -cellWidth+10/2 + cellWidth*lookaround,\n             'y': 10/2\n           });\n\n  this.wrapper.selectAll('.tape-cell')\n      .data(this.readRange(-lookaround, lookaround))\n    .enter()\n    .append('g')\n      .call(initTapeCells)\n      .call(positionCells)\n  ;\n}\n\nTapeViz.prototype = Object.create(Tape.prototype);\nTapeViz.prototype.constructor = TapeViz;\n\n// IDEA: chain headLeft/Right to wait for write()?\nTapeViz.prototype.write = function (symbol) {\n  // don't animate if symbol stays the same\n  if (Tape.prototype.read.call(this) === symbol) {\n    return;\n  }\n  Tape.prototype.write.call(this, symbol);\n\n  // remove leftover .exiting in case animation was interrupted\n  this.wrapper.selectAll('.exiting').remove();\n\n  d3.select(this.wrapper[0][0].childNodes[this.lookaround])\n      .datum(symbol)\n    .select('text')\n      .attr('fill-opacity', '1')\n      .attr('stroke-opacity', '1')\n    .transition()\n      .attr('fill-opacity', '0.4')\n      .attr('stroke-opacity', '0.1')\n    .transition()\n      .text(function (d) { return d; })\n      .attr('fill-opacity', '1')\n      .attr('stroke-opacity', '1')\n    .transition()\n      .duration(0)\n      .attr('fill-opacity', null)\n      .attr('stroke-opacity', null)\n    ;\n};\n\nfunction moveHead(wrapper, enter, exit, wOffset, cOffset) {\n  // add to one end\n  enter.call(initTapeCells);\n  // remove from the other end\n  exit.classed('exiting', true);\n  // translate cells forward, and the wrapper backwards\n  wrapper.selectAll('.tape-cell')\n      .call(positionCells, cOffset);\n  wrapper\n      .attr('transform', 'translate(' + (wOffset*cellWidth).toString() + ' 10)')\n    // animate wrapper returning to neutral position\n    .transition()\n      .call(repositionWrapper);\n}\n\nTapeViz.prototype.headRight = function () {\n  Tape.prototype.headRight.call(this);\n  // remove leftover .exiting in case animation was interrupted.\n  // Important: call-by-value evaluates the selection argument(s) of 'moveHead' before\n  // before entering the function, so exiting nodes have to be removed beforehand.\n  this.wrapper.selectAll('.exiting').remove();\n  moveHead(this.wrapper,\n    // add to right end\n    this.wrapper.append('g')\n        .datum(this.readOffset(this.lookaround)),\n    // remove from left end\n    this.wrapper.select('.tape-cell'),\n    1, -1);\n};\n\nTapeViz.prototype.headLeft = function () {\n  Tape.prototype.headLeft.call(this);\n  this.wrapper.selectAll('.exiting').remove();\n  moveHead(this.wrapper,\n    this.wrapper.insert('g', ':first-child')\n        .datum(this.readOffset(-this.lookaround)),\n    this.wrapper.select('.wrapper > .tape-cell:last-of-type'),\n    -1, 0);\n};\n\nmodule.exports = TapeViz;\n","'use strict';\n// misc. utilities\n\n//////////////////////////////////\n// Utilities for null/undefined //\n//////////////////////////////////\n\n// Assert non-null.\n// Return the value if it is not null or undefined; otherwise, throw an error.\nfunction nonNull(value) {\n  if (value == null) {\n    throw new Error('expected a non-null defined value, but got: ' + String(value));\n  }\n  return value;\n}\n\n// Null coalescing: iff the first argument is null or undefined, return the second.\nfunction coalesce(a, b) {\n  return (a != null) ? a : b;\n}\n\n// Apply a function to a value if non-null, otherwise return the value.\n// (Monadic bind for maybe (option) type.)\n// ((a -> b), ?a) -> ?b\nfunction applyMaybe(f, x) {\n  return (x != null) ? f(x) : x;\n}\n\n// Returns the first function result that is not null or undefined.\n// Otherwise, returns undefined.\n// ((a -> ?b), [a]) -> ?b\nfunction getFirst(f, xs) {\n  for (var i = 0; i < xs.length; ++i) {\n    var val = f(xs[i]);\n    if (val != null) {\n      return val;\n    }\n  }\n}\n\n/////////\n// DOM //\n/////////\n\n/* global document */\n\n/**\n * Concat an array of DOM Nodes into a DocumentFragment.\n * @param  {[Node]} array\n * @return {DocumentFragment}\n */\nfunction toDocFragment(array) {\n  var result = document.createDocumentFragment();\n  array.forEach(result.appendChild.bind(result));\n  return result;\n}\n\n///////////////////////\n// IE/Edge detection //\n///////////////////////\n\n// http://stackoverflow.com/a/9851769\nvar isBrowserIEorEdge = /*@cc_on!@*/false\n  || Boolean(document.documentMode) || Boolean(window.StyleMedia); // eslint-disable-line\n\n\nexports.nonNull = nonNull;\nexports.coalesce = coalesce;\nexports.applyMaybe = applyMaybe;\nexports.getFirst = getFirst;\n\nexports.toDocFragment = toDocFragment;\n\nexports.isBrowserIEorEdge = isBrowserIEorEdge;\n","'use strict';\n/**\n * Lightweight property assignment watching by overriding getters/setters.\n * Intended as a bridge between plain JS properties and other libraries.\n *\n * Inspired by https://gist.github.com/eligrey/384583, which works for\n * data properties only, this works for both data and accessor properties.\n *\n * 2015-11-21\n * @author Andy Li\n */\n\n/**\n * Watches a property for assignment by overriding it with a getter & setter\n * on top of the previous value or accessors.\n *\n * The handler can intercept assignments by returning a different value.\n * Watching an unwritable/unsettable property does nothing, but trying to watch\n * a non-existent or non-configurable property fails fast with TypeError.\n * @param  {!Object} thisArg The object that contains the property.\n * @param  {String}  prop    The name of the property to watch.\n * @param            handler The function to call when the property is\n *   assigned to. Important: this function intercepts assignment;\n *   its return value is set as the new value.\n * @throws {TypeError} if object is null or does not have the property\n * @throws {TypeError} if thisArg.prop is non-configurable\n * @return {?Object}         The previous property descriptor, or null if the\n *   property is not writable/settable.\n */\nfunction watch(thisArg, prop, handler) {\n  var desc = Object.getOwnPropertyDescriptor(thisArg, prop);\n  // check pre-conditions: existent, configurable, writable/settable\n  if (desc === undefined) {\n    throw new TypeError('Cannot watch nonexistent property \\''+prop+'\\'');\n  } else if (!desc.configurable) {\n    throw new TypeError('Cannot watch non-configurable property \\''+prop+'\\'');\n  } else if (!desc.writable && desc.set === undefined) {\n    return; // no-op since property can't change without reconfiguration\n  }\n\n  var accessors = (function () {\n    if (desc.set) {\n      // case: .get/.set\n      return {\n        get: desc.get,\n        set: function (newval) {\n          return desc.set.call(thisArg, handler.call(thisArg, prop, thisArg[prop], newval));\n        }\n      };\n    } else {\n      // case: .value\n      var val = desc.value;\n      return {\n        get: function () {\n          return val;\n        },\n        set: function (newval) {\n          return val = handler.call(thisArg, prop, val, newval);\n        }\n      };\n    }\n  })();\n  Object.defineProperty(thisArg, prop, accessors);\n\n  return desc;\n}\n\n/**\n * {@link watch} that, if successful, also calls the handler once with\n *   the current value (by setting it).\n * @see watch\n */\nfunction watchInit(thisArg, prop, handler) {\n  var value = thisArg[prop];\n  var desc = watch(thisArg, prop, handler);\n  if (desc) { thisArg[prop] = value; }\n  return desc;\n}\n\nif (typeof exports === 'object') {\n  exports.watch = watch;\n  exports.watchInit = watchInit;\n}\n","module.exports = _;","module.exports = d3;","module.exports = lodash;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/build/\";","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(6095);\n"],"sourceRoot":""}