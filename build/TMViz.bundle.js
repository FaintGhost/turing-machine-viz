/*! For license information please see TMViz.bundle.js.LICENSE.txt */
var TMViz;(()=>{"use strict";var t={8390:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n=r.p+"state-diagram/StateViz.css"},5820:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n=r.p+"tape/tape.css"},6095:(t,e,r)=>{var n=r(7057).TuringMachine,a=r(5884),i=r(2618),o=r(7099),s=r(2645).Q,u=r(5680);function c(t){return u.select(t.domNode).classed("active-edge",!0).transition().style("stroke-width","3px").transition().style("stroke-width","1px").transition().duration(0).each("start",(function(){u.select(this).classed("active-edge",!1)})).style("stroke",null).style("stroke-width",null)}function p(t,e){return new a(t.append("svg").attr("class","tm-tape"),9,e.blank,e.input?String(e.input).split(""):[])}function l(t,e,r){t=u.select(t);var a=new i(e.table);this.stateviz=new o(t,a.getVertexMap(),a.getEdges()),null!=r&&(this.positionTable=r),this.edgeAnimation=c,this.stepInterval=100;var l=this;this.machine=new n(function(t,e){return function(e,r){var n,a,i=t.getInstructionAndEdge(e,r);return null==i?null:(n=i.edge,a=l.edgeAnimation(n),l.isRunning&&a.transition().duration(l.stepInterval).each("end",(function(){l.isRunning&&l.step()})),i.instruction)}}(a),e.startState,p(t,e)),s(this.machine,"state",(function(t,e,r){return u.select(a.getVertex(e).domNode).classed("current-state",!1),u.select(a.getVertex(r).domNode).classed("current-state",!0),r})),this.isHalted=!1;var h=!1;Object.defineProperty(this,"isRunning",{configurable:!0,get:function(){return h},set:function(t){h!==t&&(h=t)&&this.step()}}),this.__parentDiv=t,this.__spec=e}l.prototype.step=function(){this.machine.step()||(this.isRunning=!1,this.isHalted=!0)},l.prototype.reset=function(){this.isRunning=!1,this.isHalted=!1,this.machine.state=this.__spec.startState,this.machine.tape.domNode.remove(),this.machine.tape=p(this.__parentDiv,this.__spec)},Object.defineProperty(l.prototype,"positionTable",{get:function(){return this.stateviz.positionTable},set:function(t){this.stateviz.positionTable=t}}),t.exports=l},7057:(t,e)=>{function r(t,e,r){this.transition=t,this.state=e,this.tape=r}r.prototype.toString=function(){return String(this.state)+"\n"+String(this.tape)},r.prototype.step=function(){var t=this.nextInstruction;return null!=t&&(this.tape.write(t.symbol),function(t,e){switch(e){case n.right:t.headRight();break;case n.left:t.headLeft();break;case n.none:t.headNone();break;default:throw new TypeError("not a valid tape movement: "+String(e))}}(this.tape,t.move),this.state=t.state,!0)},Object.defineProperties(r.prototype,{nextInstruction:{get:function(){return this.transition(this.state,this.tape.read())},enumerable:!0},isHalted:{get:function(){return null==this.nextInstruction},enumerable:!0}});var n=Object.freeze({left:{toString:function(){return"L"}},right:{toString:function(){return"R"}},none:{toString:function(){return"N"}}});Object.freeze({left:n.right,right:n.left,none:n.none});e.TuringMachine=r},2618:(t,e,r)=>{var n=r(3804);function a(t,e,r){return n.defaults({},r,{state:t,symbol:e})}function i(t){return" "===t?"␣":t}function o(t){var e=function(t){var e=n.mapValues(t,(function(t,e){return{label:e,transitions:t}})),r=[];return n.forEach(e,(function(t,o){var s,u;t.transitions=t.transitions&&(s={},u={},n.forEach(t.transitions,(function(c,p){var l=p.split(",").reduce((function(t,e){return""===e&&""===t[t.length-1]?t[t.length-1]=",":t.push(e),t}),[]),h=function(a,i){var o=u[a]||n.tap(u[a]={source:t,target:e[a],labels:[]},r.push.bind(r));return o.labels.push(i),o}(null!=c.state?c.state:o,function(t,e){var r=(null==e.symbol?"":i(String(e.symbol))+",")+String(e.move);return t.map(i).join(",")+"→"+r}(l,c));l.forEach((function(t){s[t]={instruction:a(o,t,c),edge:h}}))})),s)})),{graph:e,edges:r}}(t);Object.defineProperties(this,{__graph:{value:e.graph},__edges:{value:e.edges}})}o.prototype.getVertexMap=function(){return this.__graph},o.prototype.getEdges=function(){return this.__edges},o.prototype.getVertex=function(t){return this.__graph[t]},o.prototype.getInstructionAndEdge=function(t,e){var r=this.__graph[t];if(void 0===r)throw new Error("not a valid state: "+String(t));return r.transitions&&r.transitions[e]},t.exports=o},7099:(t,e,r)=>{var n=r(4891).isBrowserIEorEdge,a=r(5680),i=r(6215),o=r(3804).assign;function s(t,e){return t.map((function(t,r){return t+e[r]}))}function u(t,e){return s(t,e.map((function(t){return-t})))}function c(t){return Math.sqrt(function(t){return t.map((function(t){return t*t})).reduce((function(t,e){return t+e}),0)}(t))}function p(t,e){return[Math.cos(e)*t,Math.sin(e)*t]}function l(t){t.forEach((function(t){var e=t.source.index+","+t.target.index;this[e]=(this[e]||0)+1}),this)}l.prototype.numEdgesFromTo=function(t,e){return this[String(t)+","+String(e)]||0};var h=Object.freeze({loop:{},arc:{},straight:{}});function d(t){return t}function f(){}function g(t,e,r){return Math.max(t,Math.min(r,e))}l.prototype.shapeForEdge=function(t){return t.target.index===t.source.index?h.loop:this.numEdgesFromTo(t.target.index,t.source.index)?h.arc:h.straight};var v=n?function(t,e){return t.append("div").style({width:"100%",height:"0","padding-bottom":100*e+"%",position:"relative"}).append("svg").style({position:"absolute",top:"0",left:"0"})}:function(t){return t.append("svg")};function y(t,e,r){var n=800,o=500,y=20,m=a.scale.category10(),x=v(t,o/n);x.attr({viewBox:[0,0,n,o].join(" "),version:"1.1",":xmlns":"http://www.w3.org/2000/svg",":xmlns:xlink":"http://www.w3.org/1999/xlink"});var b=e instanceof Array?e:i.values(e);this.__stateMap=e;var w=a.layout.force().nodes(b).links(r).size([n,o]).linkDistance([140]).charge([-500]).theta(.1).gravity(.05).start(),k=w.drag().on("dragstart",(function(t){t.fixed=!0,x.transition().style("box-shadow","inset 0 0 1px gold")})).on("dragend",(function(){x.transition().style("box-shadow",null)})),S=new l(r),_=x.selectAll(".edgepath").data(r).enter().append("g"),M=function(t,e){return String(-1.1*(e+1))+"em"},O=function(t,e){return String(.6+1.1*(e+1))+"em"};_.each((function(t,e){var r=a.select(this),n=r.append("path").attr({class:"edgepath",id:"edgepath"+e}).each((function(t){t.domNode=this})),i=r.selectAll(".edgelabel").data(t.labels).enter().append("text").attr("class","edgelabel");i.append("textPath").attr("xlink:href",(function(){return"#edgepath"+e})).attr("startOffset","50%").text(d);var o=S.shapeForEdge(t);switch(t.getPath=function(t,e,r){var n,a;return e===h.loop?(n=p(t,-15*Math.PI/180),a=" a 19,27 45 1,1 "+n[0]+","+(n[1]+t),function(){return"M "+r.source.x+","+(r.source.y-t)+a}):e===h.arc?function(){var e,n,a,i=[r.source.x,r.source.y],o=[r.target.x,r.target.y],l=u(o,i),h=1.2*c(l),d=(n=(e=l)[0],a=e[1],Math.atan2(a,n)),f=-Math.PI/2/2,g=s(i,p(t,d+f)),v=s(o,p(t,d+Math.PI-f));return i[0]<=o[0]?"M "+g[0]+" "+g[1]+" A "+h+" "+h+" 0 0,1 "+v[0]+" "+v[1]:"M "+v[0]+" "+v[1]+" A "+h+" "+h+" 0 0,0 "+g[0]+" "+g[1]}:e===h.straight?function(){var e=[r.source.x,r.source.y],n=[r.target.x,r.target.y],a=u(n,e);if(0===a[0]&&0===a[1])return null;var i,o,s=u(n,function(t,e){return t.map((function(t){return e*t}))}((o=c(i=a),i.map((function(t){return t/o}))),t));return"M "+e[0]+" "+e[1]+" L "+s[0]+" "+s[1]}:void 0}(y,o,t),o){case h.straight:i.attr("dy",M),t.refreshLabels=function(){i.attr("transform",(function(){if(t.target.x<t.source.x){var e={x:(r=this.getBBox()).x+r.width/2,y:r.y+r.height/2};return"rotate(180 "+e.x+" "+e.y+")"}return null;var r}))};break;case h.arc:var l;t.refreshLabels=function(){var e=t.target.x<t.source.x;e!==l&&(n.classed("reversed-arc",e),i.attr("dy",e?O:M),l=e)};break;case h.loop:i.attr("transform",(function(t,e){return"translate("+String(8*(e+1))+" "+String(-8*(e+1))+")"})),t.refreshLabels=f}}));var j=_.selectAll(".edgepath"),E=x.selectAll(".node").data(b).enter(),P=E.append("circle").attr("class","node").attr("r",y).style("fill",(function(t,e){return m(e)})).each((function(t){t.domNode=this})).on("dblclick",(function(t){t.fixed=!1,w.resume()})).call(k),A=E.append("text").attr("class","nodelabel").attr("dy","0.25em").text((function(t){return t.label}));x.append("defs").selectAll("marker").data(["arrowhead","active-arrowhead","reversed-arrowhead","reversed-active-arrowhead"]).enter().append("marker").attr({id:function(t){return t},viewBox:"0 -5 10 10",refX:function(t){return 0===t.lastIndexOf("reversed-",0)?0:10},orient:"auto",markerWidth:10,markerHeight:10}).append("path").attr("d","M 0 -5 L 10 0 L 0 5 Z").attr("transform",(function(t){return 0===t.lastIndexOf("reversed-",0)?"rotate(180 5 0)":null}));var T=".edgepath {  marker-end: url(#arrowhead);}.edgepath.active-edge {  marker-end: url(#active-arrowhead);}.edgepath.reversed-arc {  marker-start: url(#reversed-arrowhead);  marker-end: none;}.edgepath.active-edge.reversed-arc {  marker-start: url(#reversed-active-arrowhead);  marker-end: none;}";x.append("style").each((function(){this.styleSheet?this.styleSheet.cssText=T:this.textContent=T})),w.on("tick",(function(){P.attr({cx:function(t){return t.x=g(y,n-y,t.x)},cy:function(t){return t.y=g(y,o-y,t.y)}}),A.attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y})),j.attr("d",(function(t){return t.getPath()})),_.each((function(t){t.refreshLabels()})),b.every((function(t){return t.fixed}))&&w.stop()})),this.force=w}r(8390);var m=i.mapValues(i.pick(["x","y","px","py","fixed"]));Object.defineProperty(y.prototype,"positionTable",{get:function(){return m(this.__stateMap)},set:function(t){!function(t,e){i.forEach((function(e,r){var n=t[r];void 0!==n&&o(e,n)}),e)}(t,this.__stateMap),this.force.resume()}}),t.exports=y},7602:(t,e,r)=>{var n=r(6215);function a(t,e){Object.defineProperty(this,"blank",{value:t,writable:!1,enumerable:!0}),this.tape={before:[],after:null==e||0==e.length?[t]:e.slice().reverse(),toString:function(){return this.before.join("")+"🔎"+this.after.slice().reverse().join("")}}}a.prototype.read=function(){return n.last(this.tape.after)},a.prototype.write=function(t){this.tape.after[this.tape.after.length-1]=t},a.prototype.headRight=function(){var t=this.tape.before,e=this.tape.after;t.push(e.pop()),n.isEmpty(e)&&e.push(this.blank)},a.prototype.headLeft=function(){var t=this.tape.before,e=this.tape.after;n.isEmpty(t)&&t.push(this.blank),e.push(t.pop())},a.prototype.headNone=function(){},a.prototype.toString=function(){return this.tape.toString()},a.prototype.readOffset=function(t){var e=this.tape;return t>=0?t<=e.after.length-1?e.after[e.after.length-1-t]:this.blank:t>=-e.before.length?e.before[e.before.length+t]:this.blank},a.prototype.readRange=function(t,e){return n.range(t,e+1).map((function(t){return this.readOffset(t)}),this)},t.exports=a},5884:(t,e,r)=>{var n=r(7602),a=r(5680);r(5820);function i(t){return t.attr("class","tape-cell"),t.append("rect").datum(null).attr({width:50,height:50}),t.append("text").text((function(t){return t})).attr({x:25,y:33}),t}function o(t,e){return e=null==e?0:e,t.attr("transform",(function(t,r){return"translate("+(50*(r+e)-40)+")"})),t}function s(t){t.attr("transform","translate(0 10)").transition().duration(0).select(".exiting").remove()}function u(t,e,r,a){n.call(this,r,a),Object.defineProperty(this,"lookaround",{value:e,writable:!1,enumerable:!0}),Object.defineProperty(this,"domNode",{value:t,writable:!1,enumerable:!0});var u=50*(e+1+e-2)+20;t.attr({width:"95%",viewBox:[0,0,u,70].join(" ")}),this.wrapper=t.append("g").attr("class","wrapper").call(s),t.append("rect").attr({id:"tape-head",width:60,height:60,x:50*e-45,y:5}),this.wrapper.selectAll(".tape-cell").data(this.readRange(-e,e)).enter().append("g").call(i).call(o)}function c(t,e,r,n,a){e.call(i),r.classed("exiting",!0),t.selectAll(".tape-cell").call(o,a),t.attr("transform","translate("+(50*n).toString()+" 10)").transition().call(s)}u.prototype=Object.create(n.prototype),u.prototype.constructor=u,u.prototype.write=function(t){n.prototype.read.call(this)!==t&&(n.prototype.write.call(this,t),this.wrapper.selectAll(".exiting").remove(),a.select(this.wrapper[0][0].childNodes[this.lookaround]).datum(t).select("text").attr("fill-opacity","1").attr("stroke-opacity","1").transition().attr("fill-opacity","0.4").attr("stroke-opacity","0.1").transition().text((function(t){return t})).attr("fill-opacity","1").attr("stroke-opacity","1").transition().duration(0).attr("fill-opacity",null).attr("stroke-opacity",null))},u.prototype.headRight=function(){n.prototype.headRight.call(this),this.wrapper.selectAll(".exiting").remove(),c(this.wrapper,this.wrapper.append("g").datum(this.readOffset(this.lookaround)),this.wrapper.select(".tape-cell"),1,-1)},u.prototype.headLeft=function(){n.prototype.headLeft.call(this),this.wrapper.selectAll(".exiting").remove(),c(this.wrapper,this.wrapper.insert("g",":first-child").datum(this.readOffset(-this.lookaround)),this.wrapper.select(".wrapper > .tape-cell:last-of-type"),-1,0)},t.exports=u},4891:(t,e)=>{var r=Boolean(document.documentMode)||Boolean(window.StyleMedia);e.isBrowserIEorEdge=r},2645:(t,e)=>{e.Q=function(t,e,r){var n=t[e],a=function(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n)throw new TypeError("Cannot watch nonexistent property '"+e+"'");if(!n.configurable)throw new TypeError("Cannot watch non-configurable property '"+e+"'");if(n.writable||void 0!==n.set){var a=function(){if(n.set)return{get:n.get,set:function(a){return n.set.call(t,r.call(t,e,t[e],a))}};var a=n.value;return{get:function(){return a},set:function(n){return a=r.call(t,e,a,n)}}}();return Object.defineProperty(t,e,a),n}}(t,e,r);return a&&(t[e]=n),a}},6215:t=>{t.exports=_},5680:t=>{t.exports=d3},3804:t=>{t.exports=lodash}},e={};function r(n){var a=e[n];if(void 0!==a)return a.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.p="/build/";var n=r(6095);TMViz=n})();
//# sourceMappingURL=TMViz.bundle.js.map